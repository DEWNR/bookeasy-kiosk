<!DOCTYPE html>
<html lang="en" xml:lang="en" class="no-js" prefix="og: http://ogp.me/ns#" data-ng-app="kioskApp">

    <head>

        <meta charset="utf-8">

        <meta http-equiv="X-UA-Compatible" content="IE=edge">

        <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1.0">


        <!--                    O
                               OO                              OO
                           O   OO                              OO   O
                           OO  OO OO                         OOOO  OO
                      OO   OOO OOOOO                         OOOO OOO   OO
                  O    OOO OOO OOOOO                         OOOOOOO  OOOO  OO
                  OOOO  OOOOOOOOOOOO                         OOOOOOOOOOOO OOOO
              OOO OOOOOOOOOOOOOOOOOO                         OOOOOOOOOOOOOOOO
              OOOOOOOOOOOOOOOOOOOOO                          OOOOOOOOOOOOOOO  OOO
               OOOOOOOOOOOOOOOOOO O                          OOOOOOOOOOOOOOOOOOOO
             OOOOOOOOOOOOOOOOOO O                              OOOOOOOOOOOOOOOOOOOO
          OOOOOOOOOOOOOOOOOOOOO OO                            OOOOOOOOOOOOOOOOOOOOOOO
          OOOOOOOOOOOOOOOOOOOOO OO                            OO OOOOOOOOOOOOOOOOOOOO
         OOOOOOOOOOOOOOOOOOOOO  OO                           OO   OOOOOOOOOOOOOOOOOOO
         OOOOOOOOOOOOOOOOOOOOOO OOO                          OO  OOOOOOOOOOOOOOOOOOOOOO
         OOOOOOOOOOOOOOOOOOOOOOOOOOO      O OOOOO           OOOOOOOOOOOOOOOOOOOOOOOOO
        OOOOOOOOOOOOOOOOOOOOOOOOOOOO       O OOOOOO         O OOOOOOOOOOOOOOOOOOOOOOOOOO
        OOOOOOOOOOOOOOOOOOOOOOOO O  O     O OOOOOOOO       O   OOOOOOOOOOOOOOOOOOOOOOOOO
          OOOOOOOOOOOOOOOOOOOOOO    O       OOOOO  OO     OO   OOOOOOOOOOOOOOOOOOOOOOOO
        OOOOOOOOOOOOOOOOOOOOOOOOO      OOO  OOOOO   O    OO    OOOOOOOOOOOOOOOOOOOOOOOO
          OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO         OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO
          OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO         OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO
           OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO         OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO
             OOOOOOOOOOOOOOOOOOOOOOOOOOOOOO         OOOOOOOOOOOOOOOOOOOOOOOOOOOOOO
             OOOOOOOOOOOOOOOOOOOOOOOOOOOOO          OOOOOOOOOOOOOOOOOOOOOOOOOOOOOO
                OOOOOOOOOOOOOOOOOOOOOOOOOO           OOOOOOOOOOOOOOOOOOOOOOOOO
                     OOOOOOOOOOOOOOOOOOO OO          O OOOOOOOOOOOOOOOOOOOO
                        OOOOOOOOOOOOOOOO  O         OO  OOOOOOOOOOOOOOO
                              OOO OOOOO   OO        OO   OOOOOOOO O
                                         OOO       OOOO
                                     O OO   O     O    OOO
                               OOOOOOO OOOO OO   OOOOOOOOOOOOOOO
                              OOOOOOOOO OOOO OOOOOO OOOOOOOOOOOOO
                               OO OOOOOOO O   OOO O   O OOOOO OOO
                               OO OOOOO OOOO O O OOO OOOOO OO OOO
                                    OOOOOOO O OO  O OOOOOOOO
                                    OOOOOOOOOOOOOOOOOOOOOOOO
                                      OOOOOOOOOOOOOOOOOOO
                                         OOOOOO OOOOOOO


                                                                                     -->

         <!-- Prefetch -->

        <link rel="dns-prefetch" href="//platform.twitter.com">

        <link rel="dns-prefetch" href="//www.google-analytics.com">

        <link rel="dns-prefetch" href="//twitter.com">

        <!-- End prefetch -->


        <!-- Stylesheets -->

        <link href="css/main.css?v=1" rel="stylesheet">
        <link href="css/bookeasy-kiosk.css?v=1" rel="stylesheet">

        <!-- End Stylesheets -->


        <!-- Scripts -->
        <!-- Avoid using unnecessary scripts in here; add them to the end of the body. If this can't be avoided, use inline or asynchronous scripts. -->

        <!-- <script type="text/javascript" src="//fast.fonts.com/jsapi/e0cc203f-7221-4daf-a2d5-815483dba107.js" async></script> -->

        <script type="text/javascript">

        	/* Detect browser capabilities for use in CSS and scripts */

            var cookieManager={};cookieManager.create=function(e,t,n){"use strict";var o,r;n?(o=new Date,o.setTime(o.getTime()+24*n*60*60*1e3),r="; expires="+o.toGMTString()):r="",document.cookie=e+"="+t+r+"; path=/"},cookieManager.read=function(e){"use strict";var t,n,o=e+"=",r=document.cookie.split(";");for(n=0;n<r.length;n+=1){for(t=r[n];" "===t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf(o))return t.substring(o.length,t.length)}return null},cookieManager.erase=function(e){"use strict";cookieManager.create(e,"",-1)},function(){"use strict";0===location.search.indexOf("?responsive=false")||location.search.indexOf("&responsive=false")>0?cookieManager.create("responsive","false"):(0===location.search.indexOf("?responsive=true")||location.search.indexOf("&responsive=true")>0)&&cookieManager.erase("responsive");var e,t=cookieManager.read("responsive");"false"===t&&(e=document.getElementById("viewport"),e.setAttribute("content","width=1206"))}(),function(){"use strict";var e=document.documentElement;e.className=e.className.replace(/(?:^|\s)no-inlinesvg(?!\S)/,""),window.devicePixelRatio>1&&(e.className=e.className.replace(/(?:^|\s)no-retina(?!\S)/,""),e.className+=" retina")}(),window.Modernizr=function(e,t,n){function o(e){b.cssText=e}function r(e,t){return o(x.join(e+";")+(t||""))}function i(e,t){return typeof e===t}function s(e,t){return!!~(""+e).indexOf(t)}function a(e,t){for(var o in e){var r=e[o];if(!s(r,"-")&&b[r]!==n)return"pfx"==t?r:!0}return!1}function c(e,t,o){for(var r in e){var s=t[e[r]];if(s!==n)return o===!1?e[r]:i(s,"function")?s.bind(o||t):s}return!1}function u(e,t,n){var o=e.charAt(0).toUpperCase()+e.slice(1),r=(e+" "+M.join(o+" ")+o).split(" ");return i(t,"string")||i(t,"undefined")?a(r,t):(r=(e+" "+T.join(o+" ")+o).split(" "),c(r,t,n))}var f,l,d,p="2.8.3",m={},g=!0,v=t.documentElement,h="modernizr",y=t.createElement(h),b=y.style,w=":)",x=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),k="Webkit Moz O ms",M=k.split(" "),T=k.toLowerCase().split(" "),j={svg:"http://www.w3.org/2000/svg"},C={},z=[],S=z.slice,N=function(e,n,o,r){var i,s,a,c,u=t.createElement("div"),f=t.body,l=f||t.createElement("body");if(parseInt(o,10))for(;o--;)a=t.createElement("div"),a.id=r?r[o]:h+(o+1),u.appendChild(a);return i=["&#173;",'<style id="s',h,'">',e,"</style>"].join(""),u.id=h,(f?u:l).innerHTML+=i,l.appendChild(u),f||(l.style.background="",l.style.overflow="hidden",c=v.style.overflow,v.style.overflow="hidden",v.appendChild(l)),s=n(u,e),f?u.parentNode.removeChild(u):(l.parentNode.removeChild(l),v.style.overflow=c),!!s},E=function(t){var n=e.matchMedia||e.msMatchMedia;if(n)return n(t)&&n(t).matches||!1;var o;return N("@media "+t+" { #"+h+" { position: absolute; } }",function(t){o="absolute"==(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position}),o},O={}.hasOwnProperty;d=i(O,"undefined")||i(O.call,"undefined")?function(e,t){return t in e&&i(e.constructor.prototype[t],"undefined")}:function(e,t){return O.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=S.call(arguments,1),o=function(){if(this instanceof o){var r=function(){};r.prototype=t.prototype;var i=new r,s=t.apply(i,n.concat(S.call(arguments)));return Object(s)===s?s:i}return t.apply(e,n.concat(S.call(arguments)))};return o}),C.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:N(["@media (",x.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},C.rgba=function(){return o("background-color:rgba(150,255,150,.5)"),s(b.backgroundColor,"rgba")},C.backgroundsize=function(){return u("backgroundSize")},C.borderradius=function(){return u("borderRadius")},C.boxshadow=function(){return u("boxShadow")},C.opacity=function(){return r("opacity:.55"),/^0.55$/.test(b.opacity)},C.cssanimations=function(){return u("animationName")},C.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return o((e+"-webkit- ".split(" ").join(t+e)+x.join(n+e)).slice(0,-e.length)),s(b.backgroundImage,"gradient")},C.csstransitions=function(){return u("transition")},C.fontface=function(){var e;return N('@font-face {font-family:"font";src:url("https://")}',function(n,o){var r=t.getElementById("smodernizr"),i=r.sheet||r.styleSheet,s=i?i.cssRules&&i.cssRules[0]?i.cssRules[0].cssText:i.cssText||"":"";e=/src/i.test(s)&&0===s.indexOf(o.split(" ")[0])}),e},C.generatedcontent=function(){var e;return N(["#",h,"{font:0/0 a}#",h,':after{content:"',w,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},C.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==j.svg};for(var P in C)d(C,P)&&(l=P.toLowerCase(),m[l]=C[P](),z.push((m[l]?"":"no-")+l));return m.addTest=function(e,t){if("object"==typeof e)for(var o in e)d(e,o)&&m.addTest(o,e[o]);else{if(e=e.toLowerCase(),m[e]!==n)return m;t="function"==typeof t?t():t,"undefined"!=typeof g&&g&&(v.className+=" "+(t?"":"no-")+e),m[e]=t}return m},o(""),y=f=null,m._version=p,m._prefixes=x,m._domPrefixes=T,m._cssomPrefixes=M,m.mq=E,m.testProp=function(e){return a([e])},m.testAllProps=u,m.testStyles=N,v.className=v.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(g?" js "+z.join(" "):""),m}(this,this.document),Modernizr.addTest("boxsizing",function(){return Modernizr.testAllProps("boxSizing")&&(void 0===document.documentMode||document.documentMode>7)});
        </script>

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="//oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
            <script src="//oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
        <!-- End scripts -->

    </head>


    <body>

        <div class="wrapper">

            <!-- Primary navigation -->

            <nav class="primary-navigation" data-ng-cloak data-ng-show="showNav">

                <div id="toolbar-cart" data-ng-class="toolbarClass"></div>

                <ul>
                    <li class="primary-navigation__item">
                        <a class="primary-navigation__link  primary-navigation__link--home" href="#/home">Home</a>
                    </li>

                    <li class="primary-navigation__item">
                        <a class="primary-navigation__link  primary-navigation__link--region" href="#/region">Camping</a>
                    </li>

                    <li class="primary-navigation__item">
                        <a class="primary-navigation__link  primary-navigation__link--entry" href="#/tours/67456">Park entry</a>
                    </li>
                </ul>

                <p>Trouble with your booking? <br />please contact 8841 3400</p>

            </nav>

            <!-- End primary navigation -->





            <!-- Site header -->

            <header class="site-header" role="banner">

                <div class="site-header__banner">

                    <img alt="National Parks South Australia" class="site-header__logo" src="images/npsa-logotype-vertical.svg">

                </div><!-- /.site-header__banner -->

            </header><!-- /.site-header -->

            <!-- End site header -->





            <!-- Main content -->

            <main class="main" data-ng-controller="MainController" data-ng-class="mainClass" role="main">


                <div class="homepage" data-ng-cloak data-ng-show="mode == 'home'">
                    <h1 class="main__title">Welcome to<span> </span>Innes National Park</h1>

                    <nav class="quickjump-navigation">

                        <ul>
                            <li class="quickjump-navigation__item  quickjump-navigation__item--region">
                                <a class="quickjump-navigation__link" href="#/region"><span>Camping</span><i class="icon-region"></i></a>
                            </li>

                            <li class="quickjump-navigation__item  quickjump-navigation__item--entry">
                                <a class="quickjump-navigation__link" href="#/tours/67456"><span>Park entry</span><i class="icon-entry"></i></a>
                            </li>
                        </ul>

                    </nav>
                </div>


                <div class="gadget" data-ng-cloak data-ng-show="mode == 'region'">
                    <iframe class="gadget__iframe    js-region-gadget-iframe" data-ng-src="iframe.html"></iframe>
                </div>


               <div class="details-gadget" data-ng-cloak data-ng-controller="DetailsController" data-ng-show="mode == 'details'">
                    <div class="js-details-gadget" id="content"></div>
                </div>


            </main>

            <!-- End main content -->

        </div>


        <script type="text/javascript" src="//www.environment.sa.gov.au/files/templates/00000000-0000-0000-0000-000000000000/f88a7f3c-df7e-430a-825c-24cfa8dec9a8/jquery-191min.js"></script>

        <script type="text/javascript" src="//gadgets.impartmedia.com/gadgets.jsz?key=7e5893292834eb2b34cd1d9b11437df9"></script>

        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.27/angular.min.js"></script>

        <script>

            // create the module and name it kioskApp
            var kioskApp = angular.module('kioskApp', []);

            kioskApp.controller('MainController', function ($scope, $location, $rootScope) {

                $scope.$location = $location;
                $scope.mode = "home";
                $scope.mainClass = "main--home";
                $rootScope.showNav = true;
                $rootScope.toolbarClass = "toolbar--home";

                // Listen for hash changes
                $scope.$on("$locationChangeSuccess", function () {
                    var detailsRE = /\/([a-z]{5})\/(\d{5})/,
                        hash = $location.path();

                    if (detailsRE.test(hash)) {
                        hashMatch = hash.match(detailsRE);
                        $scope.operatorID = hashMatch[2];
                        $scope.mode = "details"
                        $scope.mainClass = "main--internal";
                        $rootScope.showNav = true;
                        $rootScope.toolbarClass = "toolbar--internal";

                        if (hashMatch[1] === 'tours') {
                            $scope.mainClass = "main--internal  main--tours";
                        }

                    } else if (hash == "/region") {
                        $scope.mode = "region";
                        $scope.mainClass = "main--internal";
                        $rootScope.showNav = true;
                        $rootScope.toolbarClass = "toolbar--internal";

                    } else if (hash == "/home") {
                        $scope.mode = "home";
                        $scope.mainClass = "main--home";
                        $rootScope.showNav = false;
                        $rootScope.toolbarClass = "toolbar--internal";

                    } else {
                        $location.path("home");
                    }
                });

                // Add a message listener to track iFrame height changes
                window.addEventListener("message", function (event) {
                    if (typeof event.data.height === 'number') {
                        $('.js-region-gadget-iframe').height(event.data.height);
                    }
                })
            });


            // Details gadget controller
            kioskApp.controller('DetailsController', function($scope) {
                var bookingDate = new Date(),
                    gadgetOptions = {
                        vcID: 188,
                        defaultDate: bookingDate,
                        period: 1,
                        showHoverInline: true,
                        showQuantity: false,
                        collapseRefineTools: false,
                        thumbsInGrid: true
                    },
                    gadgetSelector = '.js-details-gadget';

                $scope.name = 'DetailsController';

                $scope.$on("$locationChangeSuccess", function () {
                    if ($scope.$parent.mode === 'details') {
                        $(gadgetSelector).empty();
                        BE.gadget.details(gadgetSelector, gadgetOptions);
                    }
                });
            });


            // Initialise the cart gadget
            (function () {
                var gadgetOptions = {
                        vcID:"188",
                        bookingURL:"http://www.environment.sa.gov.au/parks/Find_a_Park/Browse_by_region/Yorke_Peninsula/innes-national-park/kiosk/checkout",
                        autoCollapse:true,
                        overlaySettings:     {
                            useBlockout:     true,
                            overlayColour:   '#777',
                            overlayOpacity:  0.5,
                            innerBackground: '#FFF',
                            zIndexLowest:    1000000,
                            width:           1000,
                            height:          false
                        }
                    },
                    gadgetSelector = '#toolbar-cart';

                BE.gadget.cart(gadgetSelector, gadgetOptions);
            }())

        </script>


    </body>

</html>
