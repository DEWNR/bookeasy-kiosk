<!DOCTYPE html>
<html lang="en" xml:lang="en" class="no-js" prefix="og: http://ogp.me/ns#" data-ng-app="kioskApp">

    <head>

        <meta charset="utf-8">

        <meta http-equiv="X-UA-Compatible" content="IE=edge">

        <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1.0">


        <!--                    O
                               OO                              OO
                           O   OO                              OO   O
                           OO  OO OO                         OOOO  OO
                      OO   OOO OOOOO                         OOOO OOO   OO
                  O    OOO OOO OOOOO                         OOOOOOO  OOOO  OO
                  OOOO  OOOOOOOOOOOO                         OOOOOOOOOOOO OOOO
              OOO OOOOOOOOOOOOOOOOOO                         OOOOOOOOOOOOOOOO
              OOOOOOOOOOOOOOOOOOOOO                          OOOOOOOOOOOOOOO  OOO
               OOOOOOOOOOOOOOOOOO O                          OOOOOOOOOOOOOOOOOOOO
             OOOOOOOOOOOOOOOOOO O                              OOOOOOOOOOOOOOOOOOOO
          OOOOOOOOOOOOOOOOOOOOO OO                            OOOOOOOOOOOOOOOOOOOOOOO
          OOOOOOOOOOOOOOOOOOOOO OO                            OO OOOOOOOOOOOOOOOOOOOO
         OOOOOOOOOOOOOOOOOOOOO  OO                           OO   OOOOOOOOOOOOOOOOOOO
         OOOOOOOOOOOOOOOOOOOOOO OOO                          OO  OOOOOOOOOOOOOOOOOOOOOO
         OOOOOOOOOOOOOOOOOOOOOOOOOOO      O OOOOO           OOOOOOOOOOOOOOOOOOOOOOOOO
        OOOOOOOOOOOOOOOOOOOOOOOOOOOO       O OOOOOO         O OOOOOOOOOOOOOOOOOOOOOOOOOO
        OOOOOOOOOOOOOOOOOOOOOOOO O  O     O OOOOOOOO       O   OOOOOOOOOOOOOOOOOOOOOOOOO
          OOOOOOOOOOOOOOOOOOOOOO    O       OOOOO  OO     OO   OOOOOOOOOOOOOOOOOOOOOOOO
        OOOOOOOOOOOOOOOOOOOOOOOOO      OOO  OOOOO   O    OO    OOOOOOOOOOOOOOOOOOOOOOOO
          OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO         OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO
          OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO         OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO
           OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO         OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO
             OOOOOOOOOOOOOOOOOOOOOOOOOOOOOO         OOOOOOOOOOOOOOOOOOOOOOOOOOOOOO
             OOOOOOOOOOOOOOOOOOOOOOOOOOOOO          OOOOOOOOOOOOOOOOOOOOOOOOOOOOOO
                OOOOOOOOOOOOOOOOOOOOOOOOOO           OOOOOOOOOOOOOOOOOOOOOOOOO
                     OOOOOOOOOOOOOOOOOOO OO          O OOOOOOOOOOOOOOOOOOOO
                        OOOOOOOOOOOOOOOO  O         OO  OOOOOOOOOOOOOOO
                              OOO OOOOO   OO        OO   OOOOOOOO O
                                         OOO       OOOO
                                     O OO   O     O    OOO
                               OOOOOOO OOOO OO   OOOOOOOOOOOOOOO
                              OOOOOOOOO OOOO OOOOOO OOOOOOOOOOOOO
                               OO OOOOOOO O   OOO O   O OOOOO OOO
                               OO OOOOO OOOO O O OOO OOOOO OO OOO
                                    OOOOOOO O OO  O OOOOOOOO
                                    OOOOOOOOOOOOOOOOOOOOOOOO
                                      OOOOOOOOOOOOOOOOOOO
                                         OOOOOO OOOOOOO


                                                                                     -->

        <!-- Stylesheets -->

        <link href="css/main.css" rel="stylesheet">

        <!-- End Stylesheets -->

    </head>


    <body>

        <div class="wrapper">

            <!-- Primary navigation -->

            <nav class="primary-navigation" data-ng-cloak data-ng-show="showNav">

                <ul>
                    <li class="primary-navigation__item">
                        <a class="primary-navigation__link" href="#/home">Home<i class="icon-home"></i></a>
                    </li>

                    <li class="primary-navigation__item">
                        <a class="primary-navigation__link" href="#/region">Book camping<i class="icon-region"></i></a>
                    </li>

                    <li class="primary-navigation__item">
                        <a class="primary-navigation__link" href="#/tours/67456">Pay for your park entry<i class="icon-entry"></i></a>
                    </li>
                </ul>

            </nav>

            <!-- End primary navigation -->





            <!-- Site header -->

            <header class="site-header" role="banner">

                <div class="site-header__banner">

                    <img alt="National Parks South Australia" class="site-header__logo" src="images/npsa-logotype-vertical.svg">

                    <!-- <div id="toolbar-cart"></div> -->

                </div><!-- /.site-header__banner -->

            </header><!-- /.site-header -->

            <!-- End site header -->





            <!-- Main content -->

            <main class="main" data-ng-controller="MainController" data-ng-class="mainClass" role="main">


                <div class="homepage" data-ng-cloak data-ng-show="mode == 'home'">
                    <h1 class="main__title">Welcome to Innes National Park</h1>

                    <nav class="quickjump">

                        <ul>
                            <li class="quickjump__item">
                                <a class="quickjump__link" href="#/region">Book camping<i class="icon-region"></i></a>
                            </li>

                            <li class="quickjump__item">
                                <a class="quickjump__link" href="#/tours/67456">Pay for your park entry<i class="icon-entry"></i></a>
                            </li>
                        </ul>

                    </nav>
                </div>


                <div class="gadget" data-ng-cloak data-ng-show="mode == 'region'">
                    <iframe class="gadget__iframe    js-region-gadget-iframe" data-ng-src="iframe.html"></iframe>
                </div>


               <div class="details-gadget" data-ng-cloak data-ng-controller="DetailsController" data-ng-show="mode == 'details'">
                    <div class="js-details-gadget" id="content"></div>
                </div>


            </main>

            <!-- End main content -->

        </div>


        <script type="text/javascript" src="//www.environment.sa.gov.au/files/templates/00000000-0000-0000-0000-000000000000/f88a7f3c-df7e-430a-825c-24cfa8dec9a8/jquery-191min.js"></script>

        <script type="text/javascript" src="//gadgets.impartmedia.com/gadgets.jsz?key=7e5893292834eb2b34cd1d9b11437df9"></script>

        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.27/angular.min.js"></script>

        <script>

            // create the module and name it kioskApp
            var kioskApp = angular.module('kioskApp', []);

            kioskApp.controller('MainController', function ($scope, $location, $rootScope) {

                $scope.$location = $location;
                $scope.mode = "home";
                $scope.mainClass = "main--home";
                $rootScope.showNav = true;

                // Listen for hash changes
                $scope.$on("$locationChangeSuccess", function () {
                    var detailsRE = /\/[a-z]{5}\/(\d{5})/,
                        hash = $location.path();

                    if (detailsRE.test(hash)) {
                        $scope.operatorID = hash.match(detailsRE)[1];
                        $scope.mode = "details"
                        $scope.mainClass = "main--internal";
                        $rootScope.showNav = true;

                    } else if (hash == "/region") {
                        $scope.mode = "region";
                        $scope.mainClass = "main--internal";
                        $rootScope.showNav = true;

                    } else if (hash == "/home") {
                        $scope.mode = "home";
                        $scope.mainClass = "main--home";
                        $rootScope.showNav = false;

                    } else {
                        $location.path("home");
                    }
                });

                // Add a message listener to track iFrame height changes
                window.addEventListener("message", function (event) {
                    if (typeof event.data.height === 'number') {
                        $('.js-region-gadget-iframe').height(event.data.height);
                    }
                })
            });


            // Details gadget controller
            kioskApp.controller('DetailsController', function($scope) {
                var bookingDate = new Date(),
                    gadgetOptions = {
                        vcID: 188,
                        defaultDate: bookingDate,
                        period: 1,
                        showHoverInline: true,
                        showQuantity: false,
                        thumbsInGrid: false
                    },
                    gadgetSelector = '.js-details-gadget';

                $scope.name = 'DetailsController';

                $scope.$on("$locationChangeSuccess", function () {
                    if ($scope.$parent.mode === 'details') {
                        $(gadgetSelector).empty();
                        BE.gadget.details(gadgetSelector, gadgetOptions);
                    }
                });
            });


            // Initialise the cart gadget
            (function () {
                var gadgetOptions = {
                        vcID:"188",
                        bookingURL:"https://www.environment.sa.gov.au/parks/checkout",  // Consider changing this to a dedicated page for the kiosk
                        autoCollapse:true
                    },
                    gadgetSelector = '#toolbar-cart';

                BE.gadget.cart(gadgetSelector, gadgetOptions);
            }())

        </script>


    </body>

</html>
